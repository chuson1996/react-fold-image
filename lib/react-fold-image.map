{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2fb5cab96738bf8e2398","webpack:///./src/react-fold-image.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack:///external \"styled-components\""],"names":["Container","div","CanvasContainer","left","right","hide","direction","animating","easing","Canvas","canvas","duration","top","bottom","Relative","FoldImage","props","getNthRow","index","noCol","Math","ceil","getNthCol","getIndex","colNth","rowNth","canvasRef","nth","elem","canvases","animationMatrix","timeouts","currentTimestamp","state","width","height","canvasProps","Array","fill","nextProps","isChanged","animate","generateAnimationMatrix","startingPoint","foldingSpeed","startingDirection","oldScope","newScope","_props","isArray","some","prop","img","Image","src","onload","setState","draw","start","startingTimestamp","trace","noRow","AM_SLOW","AM_FAST","oldStartingTimestamp","newStartingTimestamp","prevState","nextPosition","indexOf","clearTimeouts","forEach","timeout","clearTimeout","foldOut","EARLY_RATIO","earlyRatio","i","setTimeout","timeout2","blockWidth","blockHeight","nthRow","nthCol","getContext","drawImage","others","visibility","position","map","_","propTypes","string","isRequired","number","bool","defaultProps"],"mappings":"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","file":"react-fold-image.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"styled-components\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"styled-components\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactFoldImage\"] = factory(require(\"react\"), require(\"styled-components\"));\n\telse\n\t\troot[\"ReactFoldImage\"] = factory(root[\"React\"], root[\"styled-components\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"lib/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2fb5cab96738bf8e2398","import React, { Component, PropTypes } from 'react';\nimport styled, { css } from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst CanvasContainer = styled.div`\n  display: flex;\n  perspective: 500px;\n\n  ${({ left }) => left && css`perspective-origin: left;`}\n  ${({ right }) => right && css`perspective-origin: right;`}\n\n  ${({ hide }) => hide && css`\n    ${({ direction }) => direction === 'down' && css`\n      perspective-origin: top;\n    `}\n    ${({ direction }) => direction === 'toRight' && css`\n      perspective-origin: left;\n    `}\n  `}\n\n  ${({ animating }) => animating && css`\n    ${({ direction }) => direction === 'down' && css`\n      perspective-origin: top;\n    `}\n    ${({ direction }) => direction === 'toRight' && css`\n      perspective-origin: left;\n    `}\n  `}\n`;\n\nconst easing = 'cubic-bezier(0.360, 0.000, 0.000, 1.525)';\nconst Canvas = styled.canvas`\n  transition: transform ${({ duration }) => duration || 0.3}s ${easing}, opacity ${({ duration }) => duration || 0.3}s ${easing};\n\n  // When it's not animating and it's visible\n  ${({ animating, hide }) => (!animating && !hide) && css`\n    ${({ left }) => left && css`\n      transform-origin: right;\n      &:hover {\n        transform: rotateY(-10deg);\n      }\n    `}\n    ${({ right }) => right && css`\n      transform-origin: left;\n      &:hover {\n        transform: rotateY(10deg);\n      }\n    `}\n    ${({ top }) => top && css`\n      transform-origin: bottom;\n      &:hover {\n        transform: rotateX(10deg);\n      }\n    `}\n    ${({ bottom }) => bottom && css`\n      transform-origin: top;\n      &:hover {\n        transform: rotateX(-10deg);\n      }\n    `}\n    ${(({ left, top }) => left && top && css`\n      transform-origin: 100% 100%;\n      &:hover {\n        transform: rotateX(5deg) rotateY(-5deg);\n      }\n    `)}\n    ${(({ left, bottom }) => left && bottom && css`\n      transform-origin: 100% 0;\n      &:hover {\n        transform: rotateX(-5deg) rotateY(-5deg);\n      }\n    `)}\n    ${(({ right, top }) => right && top && css`\n      transform-origin: 0 100%;\n      &:hover {\n        transform: rotateX(5deg) rotateY(5deg);\n      }\n    `)}\n    ${(({ right, bottom }) => right && bottom && css`\n      transform-origin: 0 0;\n      &:hover {\n        transform: rotateX(-5deg) rotateY(5deg);\n      }\n    `)}\n  `}\n\n  opacity: 1;\n  ${({ hide, direction, animating }) => {\n    return css`\n      ${hide && css`\n        opacity: 0;\n      `}\n      ${() => {\n        if (direction === 'down') return css`\n          ${(hide || animating) && css`\n            transform-origin: top;\n          `}\n          ${hide && css`\n            transform: rotateX(90deg);`}\n        `;\n        if (direction === 'toRight') return css`\n          ${(hide || animating) && css`\n            transform-origin: left;\n          `}\n          ${hide && css`\n            transform: rotateY(-90deg);`}\n        `;\n        if (direction === 'up') return css`\n          ${(hide || animating) && css`\n            transform-origin: bottom;\n          `}\n          ${hide && css`\n            transform: rotateX(90deg);`}\n        `;\n        if (direction === 'toLeft') return css`\n          ${(hide || animating) && css`\n            transform-origin: right;\n          `}\n          ${hide && css`\n            transform: rotateY(90deg);`}\n        `;\n      }}\n    `;\n  }}\n`;\n\nconst Relative = styled.div`\n  position: relative;\n`;\n\n// --------------- Component -------------------\n\nexport default class FoldImage extends Component {\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    noCol: PropTypes.number,\n    noRow: PropTypes.number,\n    startingPoint: PropTypes.number,\n    startingDirection: PropTypes.string,\n    hide: PropTypes.bool,\n    foldingSpeed: PropTypes.number,\n    earlyRatio: PropTypes.number\n  };\n\n  static defaultProps = {\n    noCol: 4,\n    noRow: 4,\n    foldingSpeed: 0.7, // s\n    earlyRatio: 0.3,\n  };\n\n  constructor(props) {\n    super(props);\n    this.canvases = [];\n    this.animationMatrix = {};\n    this.timeouts = [];\n    this.currentTimestamp = 0;\n    this.state = {\n      canvas: {\n        width: 0,\n        height: 0\n      },\n      canvasProps: Array(4 * 4).fill({\n        animating: false,\n        hide: props.hide\n      }),\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.isChanged(this.props, nextProps, 'hide')) {\n      if (nextProps.hide) {\n        this.animate(false);\n      } else {\n        this.animate(true);\n      }\n    }\n\n    if (this.isChanged(this.props, nextProps, ['startingPoint', 'noCol', 'noRow'])) {\n      this.generateAnimationMatrix(nextProps.startingPoint, this.props.foldingSpeed, 0, nextProps.startingDirection);\n    }\n  }\n\n  isChanged(oldScope, newScope, props) {\n    const _props = Array.isArray(props) ? props : [props];\n    return _props.some((prop) => oldScope[prop] !== newScope[prop]);\n  }\n\n  componentDidMount() {\n    this.img = new Image();\n    this.img.src = this.props.src;\n    const {startingPoint, startingDirection} = this.props;\n\n    this.img.onload = () => {\n      const { width, height } = this.img;\n      this.setState({ canvas: { width, height }});\n\n      this.draw();\n    };\n\n    this.generateAnimationMatrix(startingPoint, this.props.foldingSpeed, 0, startingDirection);\n    if (!this.props.hide) {\n      this.animate(true);\n    }\n  }\n\n  generateAnimationMatrix(start, duration = 0, startingTimestamp = 0, direction = null, trace = []) {\n    if (start < 0 || start > this.props.noCol * this.props.noRow) return;\n\n    const AM_SLOW = this.props.foldingSpeed;\n    const AM_FAST = AM_SLOW * 0.8;\n\n    if (!this.animationMatrix[start]) {\n      // console.log(`${start}: ${startingTimestamp}. ${direction}. Prev ${last(trace)}`);\n      this.animationMatrix[start] = {\n        duration,\n        startingTimestamp,\n        direction\n      };\n    } else {\n      const oldStartingTimestamp = this.animationMatrix[start].duration + this.animationMatrix[start].startingTimestamp;\n      const newStartingTimestamp = duration + startingTimestamp;\n\n      if (oldStartingTimestamp > newStartingTimestamp) {\n        // console.log(`${start}: ${oldStartingTimestamp}->${newStartingTimestamp}. ${this.animationMatrix[start].direction}->${direction}. Prev: ${last(trace)}`);\n        this.animationMatrix[start] = {\n          duration,\n          startingTimestamp,\n          direction\n        };\n      }\n    }\n\n    this.setState((prevState) => ({\n      canvasProps: {\n        ...prevState.canvasProps,\n        [start]: {\n          ...prevState.canvasProps[start],\n          direction: this.animationMatrix[start].direction,\n          duration: this.animationMatrix[start].duration,\n          hide: true\n        }\n      }\n    }));\n\n    if (this.getNthRow(start) < this.props.noRow) {\n      const nextPosition = this.getIndex(\n        this.getNthCol(start),\n        this.getNthRow(start) + 1\n      );\n      if (trace.indexOf(nextPosition) === -1) {\n        this.generateAnimationMatrix(\n          nextPosition,\n          AM_FAST,\n          startingTimestamp + duration,\n          'down',\n          [...trace, start]\n        );\n      }\n    }\n\n    if (this.getNthCol(start) < this.props.noCol) {\n      const nextPosition = this.getIndex(\n        this.getNthCol(start) + 1,\n        this.getNthRow(start)\n      );\n      if (trace.indexOf(nextPosition) === -1) {\n        this.generateAnimationMatrix(\n          nextPosition,\n          AM_SLOW,\n          startingTimestamp + duration,\n          'toRight',\n          [...trace, start]\n        );\n      }\n    }\n\n    if (this.getNthRow(start) > 1) {\n      const nextPosition = this.getIndex(\n        this.getNthCol(start),\n        this.getNthRow(start) - 1\n      );\n      if (trace.indexOf(nextPosition) === -1) {\n        this.generateAnimationMatrix(\n          nextPosition,\n          AM_FAST,\n          startingTimestamp + duration,\n          'up',\n          [...trace, start]\n        );\n      }\n    }\n\n    if (this.getNthCol(start) > 1) {\n      const nextPosition = this.getIndex(\n        this.getNthCol(start) - 1,\n        this.getNthRow(start)\n      );\n      if (trace.indexOf(nextPosition) === -1) {\n        this.generateAnimationMatrix(\n          this.getIndex(\n            this.getNthCol(start) - 1,\n            this.getNthRow(start)\n          ),\n          AM_SLOW,\n          startingTimestamp + duration,\n          'toLeft',\n          [...trace, start]\n        );\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    this.draw();\n  }\n\n  componentWillUnmount() {\n    this.clearTimeouts();\n  }\n\n  clearTimeouts() {\n    this.timeouts.forEach((timeout) => {\n      timeout && clearTimeout(timeout);\n    });\n  }\n\n  animate(foldOut) {\n    // foldOut = true -> animate in = expand the image\n    // foldOut = false -> animate out = contract the image\n    this.clearTimeouts();\n    const EARLY_RATIO = this.props.earlyRatio;\n    for (const i in this.animationMatrix) {\n      const { startingTimestamp, duration } = this.animationMatrix[i];\n      const timeout = setTimeout(() => {\n        this.currentTimestamp = startingTimestamp;\n        this.setState(({canvasProps}) => ({\n          canvasProps: {\n            ...canvasProps,\n            [i]: {\n              ...canvasProps[i],\n              animating: true,\n              hide: foldOut ? false : true\n            }\n          }\n        }));\n\n        const timeout2 = setTimeout(() => {\n          this.setState(({canvasProps}) => ({\n            canvasProps: {\n              ...canvasProps,\n              [i]: {\n                ...canvasProps[i],\n                animating: false,\n              }\n            }\n          }));\n        }, duration * 1000);\n        this.timeouts = [...this.timeouts, timeout2];\n      }, (startingTimestamp - this.currentTimestamp) * (foldOut ? 1 : -1) * 1000 * EARLY_RATIO);\n      this.timeouts = [...this.timeouts, timeout];\n    }\n  }\n\n  draw() {\n    const { width, height } = this.img;\n    const { noRow, noCol } = this.props;\n    const blockWidth = width / noCol;\n    const blockHeight = height / noRow;\n    this.canvases.forEach((canvas, index) => {\n      const nthRow = this.getNthRow(index);\n      const nthCol = this.getNthCol(index);\n\n      canvas.getContext('2d').drawImage(this.img,\n        (nthCol - 1) * blockWidth, (nthRow - 1) * blockHeight, blockWidth, blockHeight,\n        0, 0, canvas.width, canvas.height\n      )\n    });\n  }\n\n  getNthRow = (index) => {\n    const { noCol } = this.props;\n    return Math.ceil((index + 1) / noCol);\n  }\n\n  getNthCol = (index) => {\n    const { noCol } = this.props;\n    return (index + 1) % noCol || noCol;\n  }\n\n  getIndex = (colNth, rowNth) => {\n    return colNth + this.props.noCol * (rowNth - 1) - 1;\n  }\n\n  canvasRef = (nth) => (elem) => {\n    this.canvases[nth] = elem;\n  }\n\n  render() {\n    const { canvasProps } = this.state;\n    const { src, hide, startingPoint, startingDirection, noCol, noRow, ...others } = this.props;\n    return (\n      <Relative {...others}>\n        <img style={{ width: '100%', visibility: 'hidden' }} src={this.props.src} alt=\"\"/>\n        <Container\n          style={{\n            position: 'absolute',\n            top: 0,\n            width: '100%',\n            height: '100%'\n          }}\n        >\n          {Array(noCol * noRow).fill(null).map((_, i) =>\n            <CanvasContainer\n              key={i}\n              style={{\n                width: `${1 / noCol * 100}%`,\n                height: `${1 / noRow * 100}%`\n              }}\n              left={this.getNthCol(i) === 1}\n              top={this.getNthRow(i) === 1}\n              bottom={this.getNthRow(i) === noRow}\n              right={this.getNthCol(i) === noCol}\n              {...canvasProps[i]}\n              >\n              <Canvas\n                left={this.getNthCol(i) === 1}\n                top={this.getNthRow(i) === 1}\n                bottom={this.getNthRow(i) === noRow}\n                right={this.getNthCol(i) === noCol}\n                innerRef={this.canvasRef(i)}\n                style={{\n                  width: '100%',\n                  height: '100%'\n                }}\n                {...canvasProps[i]}\n              />\n            </CanvasContainer>\n          )}\n        </Container>\n      </Relative>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/react-fold-image.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"styled-components\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}